/*! For license information please see role-table.80f78cca4e40441b66c7.js.LICENSE.txt */
"use strict";(self.webpackChunknicefish_react=self.webpackChunknicefish_react||[]).push([[149],{89917:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(67294),r=n(28225),l=n(59908),o=n(58650),s=n(99403),i=n(89250),c=n(88843),u=n(58126);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,s=[],i=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(a=l.call(n)).done)&&(s.push(a.value),s.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const f=function(e){var t=(0,r.$G)().i18n,n=(0,i.s0)(),d=m((0,a.useState)([]),2),f=d[0],p=d[1],b=m((0,a.useState)(0),2),g=b[0],y=b[1],E=m((0,a.useState)(10),2),h=E[0],v=E[1],R=m((0,a.useState)(1),2),N=R[0],U=R[1],Z=m((0,a.useState)(0),2),L=Z[0],w=Z[1],I=function(){u.Z.getRoleTable(N,"").then((function(e){var t,n=e.data;w(n.totalElements),n=(null===(t=n)||void 0===t?void 0:t.content)||[],p(n)}))};return(0,a.useEffect)(I,[]),a.createElement("div",{className:"role-table-container"},a.createElement("form",{role:"form"},a.createElement("div",{className:"input-group"},a.createElement("input",{name:"searchStr",className:"form-control",type:"text"}),a.createElement("button",{className:"btn btn-success",type:"button"},a.createElement("i",{className:"fa fa-search"})),a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){n("/manage/role-edit/-1")}},a.createElement("i",{className:"fa fa-plus"})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"role-item-container"},a.createElement(l.w,{showGridlines:!0,stripedRows:!0,tableStyle:{width:"100%"},value:f,rows:h,first:g,paginator:{totalRecords:L,onPageChange:function(e){y(e.first),v(e.rows),U(e.page+1)}}},a.createElement(o.s,{field:"roleName",header:t.t("role.roleName")}),a.createElement(o.s,{field:"status",body:function(e){return 0==e.status?a.createElement("span",{className:"badge bg-danger"},"禁用"):a.createElement("span",{className:"badge bg-success"},"正常")},header:t.t("status")}),a.createElement(o.s,{field:"remark",style:{maxWidth:"120px"},header:t.t("role.remark")}),a.createElement(o.s,{field:"apiEntities",body:function(e){var t;return null==e||null===(t=e.apiEntities)||void 0===t?void 0:t.map((function(e){return a.createElement("h5",{key:e.apiPermissionId},a.createElement("span",{className:"badge bg-success"},e.apiName))}))},header:t.t("role.apiPermission")}),a.createElement(o.s,{field:"componentEntities",body:function(e){var t;return null==e||null===(t=e.componentEntities)||void 0===t?void 0:t.map((function(e){return a.createElement("h5",{key:e.compPermId},a.createElement("span",{className:"badge bg-success"},e.componentName))}))},header:t.t("role.componentPermission")}),a.createElement(o.s,{field:"",header:t.t("operation"),body:function(e){return a.createElement(a.Fragment,null,a.createElement(s.z,{icon:"pi pi-pencil",className:"p-button-success",onClick:function(){n("/manage/role-edit/"+e.roleId)}}),"  ",a.createElement(s.z,{icon:"pi pi-trash",className:"p-button-danger",onClick:function(){var n;n=e,(0,c.V)({message:t.t("confirmDelete"),header:t.t("confirm"),icon:"pi pi-exclamation-triangle",accept:function(){u.Z.deleteRole(n.roleId).then((function(e){niceFishToast({severity:"success",summary:t.t("success"),detail:t.t("success")})}),(function(e){niceFishToast({severity:"error",summary:t.t("error"),detail:t.t("fail")})})).finally(I)},reject:function(){console.log("reject")}})}}))}}))))))}},58126:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(24065),r=n(96486),l=n(90600),o=l.Z.dataURL.roleTableURL,s=l.Z.dataURL.roleListByUserIdURL,i=l.Z.dataURL.delRoleURL,c=l.Z.dataURL.newRoleURL,u=l.Z.dataURL.updateRoleURL,m=l.Z.dataURL.roleDetailURL,d=l.Z.dataURL.updateUserRoleRelationURL;const f={getRoleTable:function(e,t){var n=r.template(o)({page:e});return a.Z.post(n,{roleName:t})},getRoleListAllByUserId:function(e){var t=r.template(s)({userId:e});return a.Z.get(t)},saveUserRoleRelation:function(e,t){return a.Z.post(d,{userId:e,roleEntities:t})},getRoleInfo:function(e){var t=r.template(m)({id:e});return a.Z.get(t)},newRole:function(e){return a.Z.post(c,e)},updateRole:function(e){return a.Z.post(u,e)},deleteRole:function(e){var t=r.template(i)({id:e});return a.Z.delete(t)}}}}]);
/*! For license information please see role-table.42a8276e4ac12cdcd9da.js.LICENSE.txt */
"use strict";(self.webpackChunknicefish_react=self.webpackChunknicefish_react||[]).push([[149],{89917:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(67294),r=a(59908),l=a(58650),o=a(99403),i=a(89250),s=a(88843),c=a(58126);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,o,i=[],s=!0,c=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const d=function(e){var t=(0,i.s0)(),a=u((0,n.useState)([]),2),m=a[0],d=a[1],p=u((0,n.useState)(0),2),f=p[0],b=p[1],E=u((0,n.useState)(10),2),v=E[0],h=E[1],y=u((0,n.useState)(1),2),R=y[0],g=y[1],N=u((0,n.useState)(0),2),U=N[0],Z=N[1],w=function(){c.Z.getRoleTable(R,"").then((function(e){var t,a=e.data;Z(a.totalElements),a=(null===(t=a)||void 0===t?void 0:t.content)||[],d(a)}))};return(0,n.useEffect)(w,[]),n.createElement("div",{className:"role-table-container"},n.createElement("form",{className:"form-vertical",role:"form"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-11"},n.createElement("div",{className:"input-group"},n.createElement("input",{name:"searchStr",className:"form-control",type:"text",placeholder:"角色名称"}),n.createElement("span",{className:"input-group-btn"},n.createElement("button",{className:"btn btn-default",type:"button"},n.createElement("i",{className:"fa fa-search","aria-hidden":"true"}))))),n.createElement("div",{className:"col-md-1"},n.createElement("div",{className:"input-group pull-right"},n.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){t("/manage/permission/role-edit/-1")}},n.createElement("i",{className:"pi pi-plus","aria-hidden":"true"})))))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"role-item-container"},n.createElement(r.w,{showGridlines:!0,stripedRows:!0,tableStyle:{width:"100%"},value:m,rows:v,first:f,paginator:{totalRecords:U,onPageChange:function(e){b(e.first),h(e.rows),g(e.page+1)}}},n.createElement(l.s,{field:"roleName",header:"角色名称"}),n.createElement(l.s,{field:"status",body:function(e){return 0==e.status?n.createElement("span",{className:"label label-danger"},"禁用"):n.createElement("span",{className:"label label-success"},"正常")},header:"状态"}),n.createElement(l.s,{field:"remark",header:"备注",style:{maxWidth:"120px"}}),n.createElement(l.s,{field:"apiEntities",body:function(e){var t;return null==e||null===(t=e.apiEntities)||void 0===t?void 0:t.map((function(e){return n.createElement("h5",{key:e.apiPermissionId},n.createElement("span",{className:"label label-success"},e.apiName))}))},header:"后端接口权限"}),n.createElement(l.s,{field:"componentEntities",body:function(e){var t;return null==e||null===(t=e.componentEntities)||void 0===t?void 0:t.map((function(e){return n.createElement("h5",{key:e.compPermId},n.createElement("span",{className:"label label-success"},e.componentName))}))},header:"前端页面权限"}),n.createElement(l.s,{field:"",header:"操作",body:function(e){return n.createElement(n.Fragment,null,n.createElement(o.z,{icon:"pi pi-pencil",className:"p-button-success",onClick:function(){t("/manage/permission/role-edit/"+e.roleId)}}),"  ",n.createElement(o.z,{icon:"pi pi-trash",className:"p-button-danger",onClick:function(){var t;t=e,(0,s.V)({message:"确定要删除吗？",header:"确认",icon:"pi pi-exclamation-triangle",accept:function(){c.Z.deleteRole(t.roleId).then((function(e){niceFishToast({severity:"success",summary:"Success",detail:"删除成功"})}),(function(e){niceFishToast({severity:"error",summary:"Error",detail:"删除失败"})})).finally(w)},reject:function(){console.log("reject")}})}}))}}))))))}},58126:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(24065),r=a(96486),l=a(90600),o=l.Z.dataURL.roleTableURL,i=l.Z.dataURL.roleListByUserIdURL,s=l.Z.dataURL.delRoleURL,c=l.Z.dataURL.newRoleURL,u=l.Z.dataURL.updateRoleURL,m=l.Z.dataURL.roleDetailURL,d=l.Z.dataURL.updateUserRoleRelationURL;const p={getRoleTable:function(e,t){var a=r.template(o)({page:e});return n.Z.post(a,{roleName:t})},getRoleListAllByUserId:function(e){var t=r.template(i)({userId:e});return n.Z.get(t)},saveUserRoleRelation:function(e,t){return n.Z.post(d,{userId:e,roleEntities:t})},getRoleInfo:function(e){var t=r.template(m)({id:e});return n.Z.get(t)},newRole:function(e){return n.Z.post(c,e)},updateRole:function(e){return n.Z.post(u,e)},deleteRole:function(e){var t=r.template(s)({id:e});return n.Z.delete(t)}}}}]);
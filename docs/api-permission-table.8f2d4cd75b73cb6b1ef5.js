/*! For license information please see api-permission-table.8f2d4cd75b73cb6b1ef5.js.LICENSE.txt */
"use strict";(self.webpackChunknicefish_react=self.webpackChunknicefish_react||[]).push([[249],{38060:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(67294),n=a(28225),r=a(59908),s=a(58650),l=a(99403),o=a(89250),c=a(88843),m=a(51814);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,n,r,s,l=[],o=!0,c=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(i=r.call(a)).done)&&(l.push(i.value),l.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{if(!o&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}const d=function(e){var t=(0,n.$G)().i18n,a=(0,o.s0)(),p=u((0,i.useState)([]),2),d=p[0],f=p[1],v=u((0,i.useState)(0),2),h=v[0],y=v[1],b=u((0,i.useState)(10),2),E=b[0],g=b[1],A=u((0,i.useState)(1),2),N=A[0],P=A[1],R=u((0,i.useState)(0),2),L=R[0],Z=R[1],w=function(){m.Z.getApiPermissionTable(N,"").then((function(e){var t,a=e.data;Z(a.totalElements),a=(null===(t=a)||void 0===t?void 0:t.content)||[],f(a)}))};return(0,i.useEffect)(w,[]),i.createElement("div",{className:"api-permission-table-container"},i.createElement("form",{className:"form-vertical",role:"form"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-11"},i.createElement("div",{className:"input-group"},i.createElement("input",{name:"searchStr",className:"form-control",type:"text"}),i.createElement("span",{className:"input-group-btn"},i.createElement("button",{className:"btn btn-default",type:"button"},i.createElement("i",{className:"fa fa-search","aria-hidden":"true"}))))),i.createElement("div",{className:"col-md-1"},i.createElement("div",{className:"input-group pull-right"},i.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){a("/manage/api-permission-edit/-1")}},i.createElement("i",{className:"pi pi-plus","aria-hidden":"true"})))))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"permission-item-container"},i.createElement(r.w,{showGridlines:!0,stripedRows:!0,tableStyle:{width:"100%"},value:d,rows:E,first:h,paginator:{totalRecords:L,onPageChange:function(e){y(e.first),g(e.rows),P(e.page+1)}}},i.createElement(s.s,{field:"apiName",header:t.t("apiPermission.apiName")}),i.createElement(s.s,{field:"url",header:t.t("apiPermission.apiUrl")}),i.createElement(s.s,{field:"permission",header:t.t("apiPermission.permissionWildCard")}),i.createElement(s.s,{field:"remark",header:t.t("apiPermission.remark"),style:{maxWidth:"120px"}}),i.createElement(s.s,{field:"roleEntities",body:function(e){var t;return null==e||null===(t=e.roleEntities)||void 0===t?void 0:t.map((function(e){return i.createElement("h5",{key:e.roleId},i.createElement("span",{className:"label label-success"},e.roleName))}))},header:t.t("apiPermission.table.associatedRoles")}),i.createElement(s.s,{field:"",header:t.t("operation"),body:function(e){return i.createElement(i.Fragment,null,i.createElement(l.z,{icon:"pi pi-pencil",className:"p-button-success",onClick:function(){a("/manage/api-permission-edit/"+e.apiPermissionId)}}),"  ",i.createElement(l.z,{icon:"pi pi-trash",className:"p-button-danger",onClick:function(){var a;a=e,(0,c.V)({message:t.t("confirmDelete"),header:t.t("confirm"),icon:"pi pi-exclamation-triangle",accept:function(){m.Z.deleteByApiId(a.apiPermissionId).then((function(e){niceFishToast({severity:"success",summary:t.t("success"),detail:t.t("success")})}),(function(e){niceFishToast({severity:"error",summary:t.t("error"),detail:t.t("fail")})})).finally(w)},reject:function(){console.log("reject")}})}}))}}))))))}},51814:(e,t,a)=>{a.d(t,{Z:()=>f});var i=a(24065),n=a(96486),r=a(90600),s=r.Z.dataURL.apiPermissionTableURL,l=r.Z.dataURL.apiPermissionListAll,o=r.Z.dataURL.apiPermissionListAllByRole,c=r.Z.dataURL.apiPermissionDetailURL,m=r.Z.dataURL.delApiPermissionURL,u=r.Z.dataURL.newApiPermissionURL,p=r.Z.dataURL.updateApiPermissionURL,d=r.Z.dataURL.apiRoleListURL;const f={getApiPermissionTable:function(e,t){var a=n.template(s)({page:e});return i.Z.post(a,{apiName:t})},getApiPermissionListAll:function(){var e=n.template(l)();return i.Z.post(e,{})},getApiPermissionListAllByRole:function(e){var t=n.template(o)();return i.Z.post(t,e)},getRolesByApiId:function(e){var t=n.template(d)({id:e});return i.Z.get(t)},getApiPermDetails:function(e){var t=n.template(c)({id:e});return i.Z.get(t)},deleteByApiId:function(e){var t=n.template(m)({id:e});return i.Z.delete(t)},newApiPermission:function(e){return i.Z.post(u,e)},updateApiPermission:function(e){return i.Z.post(p,e)}}}}]);
/*! For license information please see role-page.e28758caaac0858cac84.js.LICENSE.txt */
"use strict";(self.webpackChunknicefish_react=self.webpackChunknicefish_react||[]).push([[462],{35487:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(67294),r=a(96974);function l(e){var t={};return e.name||(t.name="角色名称为必填项"),t}var c=a(94756),i=function(){return i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},o=function(e,t,a){if(a||2===arguments.length)for(var n,r=0,l=t.length;r<l;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};const s=function(e){var t=(0,r.s0)(),a=(0,n.useState)({name:"",permission:[]}),s=a[0],m=a[1],u=(0,n.useState)(!1),d=u[0],f=u[1],p=(0,n.useState)({}),E=p[0],v=p[1],h=(0,n.useState)({name:{touched:!1,dirty:!1},pwd:{touched:!1,dirty:!1}}),y=h[0],N=h[1],b=(0,n.useState)([]),g=b[0],k=b[1],x=(0,n.useState)([]),S=x[0],w=x[1];function C(e,t){var a;if(Array.isArray(e)){w(e);var n=i(i({},s),{permission:e});m(n)}else{n=i(i({},s),{name:t});N(i(i({},y),((a={})[e]=i(i({},y[e]),{dirty:!0}),a))),m(n),v(l(n))}}return(0,n.useEffect)((function(){var e=l(s),t=Object.keys(e).some((function(t){return e[t]}));f(t)}),[E]),(0,n.useEffect)((function(){!function(){var e=[],t=[];(e=[{key:"1",title:"发表文章",chosen:!0},{key:"2",title:"删除文章",chosen:!1},{key:"3",title:"创建用户",chosen:!0},{key:"4",title:"删除用户",chosen:!1}]).map((function(e){e.chosen&&t.push(e.key)})),m(i(i({},s),{permission:t})),w(o([],t,!0)),k(o([],e,!0))}()}),[]),n.createElement("div",{className:"role-edit-container font-size-16"},n.createElement("div",{className:"card "},n.createElement("div",{className:"card-header"},n.createElement("h3",{className:"font-size-16 m-0"},"编辑角色")),n.createElement("div",{className:"pd-10px "},n.createElement("form",{onSubmit:function(e){console.log(s),e.preventDefault()}},n.createElement("div",{className:"form-group row"},n.createElement("label",{className:"col-md-2 md-text-align-right col-form-label"},"名称："),n.createElement("div",{className:"col-md-10"},n.createElement("input",{name:"roleName",type:"text",value:s.name,className:"form-control",onBlur:function(e){return function(e,t){var a;"name"===e&&(N(i(i({},y),((a={})[e]=i(i({},y[e]),{touched:!0}),a))),v(l(s)))}("name",e.target.value)},onChange:function(e){return C("name",e.target.value)},placeholder:"请输入名称"}),(y.name.touched||y.name.dirty)&&E.name?n.createElement("div",{className:"text-red"},E.name):"")),n.createElement("div",{className:"form-group row"},n.createElement("label",{className:"col-md-2 md-text-align-right col-form-label"},"权限："),n.createElement("div",{className:"col-md-10"},n.createElement(c.Z,{dataSource:g,targetKeys:S,onChange:C,render:function(e){return e.title}}))),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"col-md-offset-2 col-md-10"},n.createElement("button",{className:"btn btn-primary btn-margin-1rem",disabled:d},"保存"),n.createElement("button",{type:"button",className:"btn btn-secondary ml-16px",onClick:function(){t(-1)}},"取消")))))))}},14182:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(67294),r=a(60331),l=a(98061),c=a(39711);const i=function(){var e=[{title:"序号",dataIndex:"key",filters:[{text:"1",value:"1"},{text:"2",value:"2"}],onFilter:function(e,t){return t.key.includes(e)},sorter:function(e,t){return e.key-t.key}},{title:"名称",dataIndex:"title",sorter:function(e,t){return e.title.localeCompare(t.title)}},{title:"拥有权限",dataIndex:"permission",sorter:function(e,t){return e.permission.localeCompare(t.permission)}},{title:"操作",dataIndex:"options",width:150,fixed:"right",render:function(e,t){return n.createElement("div",null,e.map((function(e,a){return e.link?n.createElement(r.Z,{key:a},n.createElement(c.OL,{to:"".concat(e.link+t.key)},n.createElement("i",{className:"".concat(e.icon," "),"aria-hidden":"true"}))):n.createElement(r.Z,{key:a},n.createElement("a",null,n.createElement("i",{className:"".concat(e.icon," "),"aria-hidden":"true"})))})))}}],t=(0,n.useState)([{key:"1",title:"游客",permission:"阅读文章",options:[{icon:"fa fa-pencil-square-o",link:"/manage/role-edit/"},{icon:"fa fa-trash"}]},{key:"2",title:"注册用户",permission:"发表文章、删除文章、发表评论、删除评论、更新个人资料、修改自己密码",options:[{icon:"fa fa-pencil-square-o",link:"/manage/role-edit/"},{icon:"fa fa-trash"}]},{key:"3",title:"系统管理员",permission:"All",options:[{icon:"fa fa-pencil-square-o",link:"/manage/role-edit/"},{icon:"fa fa-trash"}]}])[0];return n.createElement("div",{className:"role-table-container"},n.createElement("form",{role:"form"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-8"},n.createElement("div",{className:"input-group"},n.createElement("input",{className:"form-control",type:"text",placeholder:"角色名称，角色代码"}),n.createElement("span",{className:"input-group-btn"},n.createElement("button",{className:"btn btn-primary",type:"button"},n.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),"搜索")))),n.createElement("div",{className:"col-sm-4 "},n.createElement("div",{className:"input-group pull-right"},n.createElement("button",{className:"btn btn-primary",type:"button"},n.createElement("i",{className:"fa fa-user","aria-hidden":"true"}),"创建角色"))))),n.createElement("div",{className:"row mt-16px "},n.createElement("div",{className:"col-md-12"},n.createElement(l.Z,{dataSource:t,columns:e,scroll:{x:650}}))))}}}]);